<!DOCTYPE html>
<html>
<head>
<title>Invoice</title>
<style>
    body {
    font-family: Arial;
    padding: 20px;
    }
    h2, h3 {
    color: darkblue;
    }
    table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
    }
    table, th, td {
    border: 1px solid black;
    }
    th, td {
    padding: 8px;
    text-align: left;
    }
</style>
</head>
<body>
<h2>Invoice Details</h2>
<div id="invoiceDetails"></div>

<script>
    function loadInvoice() {
    let allInvoices = JSON.parse(localStorage.getItem("AllInvoices") || "[]");
    let latestInvoice = allInvoices[allInvoices.length - 1];

    if (!latestInvoice) {
        document.getElementById("invoiceDetails").innerHTML = "<p>No invoice found.</p>";
        return;
    }

    let itemsHTML = "";
    for (let key in latestInvoice.items) {
        let item = latestInvoice.items[key];
        itemsHTML += `<tr>
        <td>${item.name}</td>
        <td>${item.quantity}</td>
        <td>$${item.price.toFixed(2)}</td>
        <td>$${(item.price * item.quantity * 0.10).toFixed(2)}</td>
        </tr>`;
    }

    document.getElementById("invoiceDetails").innerHTML = `
        <h3>${latestInvoice.company}</h3>
        <p><strong>Date of Invoice:</strong> ${latestInvoice.invoiceDate}</p>
        <p><strong>Invoice Number:</strong> ${latestInvoice.invoiceNumber}</p>
        <p><strong>TRN:</strong> ${latestInvoice.trn}</p>
        <p><strong>Shipping To:</strong><br>
        ${latestInvoice.shippingInfo.name}<br>
        ${latestInvoice.shippingInfo.address}</p>

        <table>
        <thead>
            <tr>
            <th>Item Name</th>
            <th>Quantity</th>
            <th>Price</th>
            <th>Discount</th>
            </tr>
        </thead>
        <tbody>
            ${itemsHTML}
        </tbody>
        </table>

        <p><strong>Subtotal:</strong> $${latestInvoice.subtotal.toFixed(2)}</p>
        <p><strong>Tax:</strong> $${latestInvoice.taxes.toFixed(2)}</p>
        <p><strong>Discount:</strong> $${latestInvoice.discount.toFixed(2)}</p>
        <p><strong>Total Cost:</strong> $${latestInvoice.total.toFixed(2)}</p>

        <p><em>Invoice has been sent to your email address on file.</em></p>
    `;
    }

    window.onload = loadInvoice;
</script>
</body>
</html>